# Default values for Dashwright
replicaCount:
  backend: 1
  frontend: 1

image:
  backend:
    repository: ghcr.io/cybedefend/dashwright/backend
    pullPolicy: Always
    tag: "1.1.0"
  frontend:
    repository: ghcr.io/cybedefend/dashwright/frontend
    pullPolicy: Always
    tag: "1.1.0"

imagePullSecrets: []
nameOverride: ""
fullnameOverride: ""

serviceAccount:
  create: true
  annotations: {}
  name: ""

service:
  backend:
    type: ClusterIP
    port: 3000
  frontend:
    type: ClusterIP
    port: 80

ingress:
  enabled: false
  className: ""
  annotations:
    {}
    # kubernetes.io/ingress.class: nginx
    # cert-manager.io/cluster-issuer: letsencrypt-prod
  hosts:
    - host: dashwright.local
      paths:
        - path: /
          pathType: Prefix
          service: frontend
        - path: /api
          pathType: Prefix
          service: backend
  tls:
    []
    # - secretName: dashwright-tls
    #   hosts:
    #     - dashwright.local

resources:
  backend:
    limits:
      cpu: 1000m
      memory: 1Gi
    requests:
      cpu: 250m
      memory: 512Mi
  frontend:
    limits:
      cpu: 500m
      memory: 512Mi
    requests:
      cpu: 100m
      memory: 256Mi

autoscaling:
  enabled: false
  minReplicas: 1
  maxReplicas: 10
  targetCPUUtilizationPercentage: 80

postgresql:
  enabled: true
  auth:
    username: dashwright
    password: changeme
    database: dashwright
  primary:
    persistence:
      enabled: true
      size: 10Gi
  # External PostgreSQL configuration (when enabled: false)
  external:
    host: "external-postgres.example.com"
    port: 5432
    username: dashwright
    password: changeme
    database: dashwright

minio:
  enabled: true
  auth:
    rootUser: minioadmin
    rootPassword: minioadmin
  persistence:
    enabled: true
    size: 50Gi
  defaultBuckets: "dashwright-artifacts"
  # External S3/MinIO configuration (when enabled: false)
  external:
    endpoint: "s3.amazonaws.com"
    port: 443
    useSSL: true
    accessKey: "your-access-key"
    secretKey: "your-secret-key"
    bucket: "dashwright-artifacts"

env:
  backend:
    NODE_ENV: production
    PORT: "3000"
    JWT_SECRET: "change-this-secret-in-production"
    JWT_EXPIRES_IN: "1h"
    JWT_REFRESH_SECRET: "change-this-refresh-secret-in-production"
    JWT_REFRESH_EXPIRES_IN: "7d"
    RATE_LIMIT_TTL: "60"
    RATE_LIMIT_MAX: "10"
    STORAGE_BUCKET: "dashwright-artifacts"
  frontend:
    VITE_API_URL: "http://dashwright.local/api"
    VITE_WS_URL: "ws://dashwright.local"

nodeSelector: {}

tolerations: []

affinity: {}
