# Default values for Dashwright
replicaCount:
  backend: 1
  frontend: 1

image:
  backend:
    repository: ghcr.io/cybedefend/dashwright/backend
    pullPolicy: Always
    tag: "1.2.14"
  frontend:
    repository: ghcr.io/cybedefend/dashwright/frontend
    pullPolicy: Always
    tag: "1.2.14"

imagePullSecrets: []
nameOverride: ""
fullnameOverride: ""

serviceAccount:
  create: true
  annotations: {}
  name: ""

service:
  backend:
    type: ClusterIP
    port: 3000
  frontend:
    type: ClusterIP
    port: 80

ingress:
  enabled: false
  className: ""
  annotations:
    {}
    # kubernetes.io/ingress.class: nginx
    # cert-manager.io/cluster-issuer: letsencrypt-prod
  hosts:
    - host: dashwright.local
      paths:
        - path: /
          pathType: Prefix
          service: frontend
        - path: /api
          pathType: Prefix
          service: backend
  tls:
    []
    # - secretName: dashwright-tls
    #   hosts:
    #     - dashwright.local

# Frontend configuration
frontend:
  # API URL - defaults to internal backend service if not specified
  # For external access, set this to your ingress URL (e.g., https://dashwright.example.com)
  apiUrl: ""
  # WebSocket URL - defaults to internal backend service if not specified
  wsUrl: ""

resources:
  backend:
    limits:
      cpu: 1000m
      memory: 1Gi
    requests:
      cpu: 250m
      memory: 512Mi
  frontend:
    limits:
      cpu: 500m
      memory: 512Mi
    requests:
      cpu: 100m
      memory: 256Mi

autoscaling:
  enabled: false
  minReplicas: 1
  maxReplicas: 10
  targetCPUUtilizationPercentage: 80

postgresql:
  enabled: true
  image:
    repository: postgres
    tag: "16-alpine"
    pullPolicy: Always
  auth:
    username: dashwright
    password: changeme
    database: dashwright
  primary:
    persistence:
      enabled: true
      size: 10Gi
      # storageClass: ""
  # External PostgreSQL configuration (when enabled: false)
  external:
    host: "external-postgres.example.com"
    port: 5432
    username: dashwright
    password: changeme
    database: dashwright

minio:
  enabled: true
  image:
    repository: minio/minio
    tag: "RELEASE.2025-09-07T16-13-09Z"
    pullPolicy: Always
  auth:
    rootUser: minioadmin
    rootPassword: minioadmin
  persistence:
    enabled: true
    size: 50Gi
    # storageClass: ""
  defaultBuckets: "dashwright-artifacts"

# Storage configuration (S3-compatible)
# Works with MinIO, AWS S3, Scaleway, DigitalOcean Spaces, Backblaze B2, etc.
storage:
  # S3 endpoint URL (leave empty for AWS S3, or set to custom endpoint)
  # Examples:
  #   MinIO (internal): "" (uses internal MinIO service)
  #   AWS S3: ""
  #   Scaleway: "https://s3.fr-par.scw.cloud"
  #   DigitalOcean: "https://nyc3.digitaloceanspaces.com"
  endpoint: ""

  # Region identifier
  region: "us-east-1"

  # S3 credentials (used when minio.enabled=false)
  # When minio.enabled=true, these are ignored and MinIO credentials are used
  accessKey: ""
  secretKey: ""

  # Bucket name
  bucket: "dashwright-artifacts"

env:
  backend:
    NODE_ENV: production
    PORT: "3000"
    JWT_SECRET: "change-this-secret-in-production"
    JWT_EXPIRES_IN: "1h"
    JWT_REFRESH_SECRET: "change-this-refresh-secret-in-production"
    JWT_REFRESH_EXPIRES_IN: "7d"
    RATE_LIMIT_TTL: "60"
    RATE_LIMIT_MAX: "10"
  frontend:
    VITE_API_URL: "http://dashwright.local/api"
    VITE_WS_URL: "ws://dashwright.local"

nodeSelector: {}

tolerations: []

affinity: {}
